<section
  *ngIf="visible"
  [@scaleAnimation]="visible ? 'enter' : 'leave'"
  (@scaleAnimation.done)="onAnimationDone($event)"
  class="flex h-120 w-[290px] flex-col items-center justify-center gap-6 rounded-2xl bg-white shadow-xl sm:w-[360px] lg:w-[440px] lg:rounded-tl-2xl lg:rounded-tr-none lg:rounded-br-2xl lg:rounded-bl-2xl">
  <div class="flex w-full items-center justify-between px-3 sm:px-6">
    <h2>Dein Profil bearbeiten</h2>
    <button (click)="closeOverlay()"><span class="material-icons close">close</span></button>
  </div>
  <div class="avatar-wrapper" (mouseenter)="isHovered = true" (mouseleave)="isHovered = false">
    <button class="avatar-img" (click)="openAvatarOverlay()" [disabled]="!canEditName">
      <img
        class="size-40 rounded-full"
        [src]="profilePictureService.getUrl(currentUser()?.profilePictureKey)"
        alt="Profilbild ändern" />
    </button>
    <span class="avatar-hint" [class.visible]="showAvatarHint">
      {{ canEditName ? 'Klick mich zum Ändern' : 'Nur als User möglich' }}</span>
  </div>

  <div class="flex w-full flex-col px-6">
    <div class="flex items-center gap-4">
      <img src="imgs/direktnachrichten img.svg" alt="" />
      <h4>Vollständiger Name</h4>
    </div>
    <input
      class="rounded-full text-gray-500"
      type="text"
      [(ngModel)]="newName"
      placeholder="{{ currentUser()?.name || 'Gast' }}"
      [disabled]="!canEditName"
      [class.input-disabled]="!canEditName" />
    <span *ngIf="!canEditName" class="text-xs text-red-400">Nur für registrierte User möglich!</span>
  </div>
  <div class="flex items-center gap-3 pt-6 sm:gap-10">
    <button class="cancel rounded-full" (click)="closeOverlay()">Abbrechen</button>
    <button class="update rounded-full" (click)="updateName()" [disabled]="!canEditName">Speichern</button>
  </div>
</section>

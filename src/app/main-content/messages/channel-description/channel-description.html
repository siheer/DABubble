<section class="channel-description">
  <button type="button" class="channel-description__close" aria-label="Overlay schließen" (click)="closeOverlay()">
    ×
  </button>

  <h1 class="channel-description__heading"># {{ title }}</h1>

  <div class="channel-description__card" [class.channel-description__card--editing]="isEditingTitle">
    <div class="channel-description__card-header">
      <span class="channel-description__label">Channel-Name</span>
      <button type="button" class="channel-description__action" *ngIf="!isEditingTitle" (click)="startEditTitle()">
        Bearbeiten
      </button>
      <button
        type="button"
        class="channel-description__action channel-description__action--primary"
        *ngIf="isEditingTitle"
        [disabled]="isSavingTitle || !channelId"
        (click)="saveTitle()">
        Speichern
      </button>
    </div>

    <div class="channel-description__content" *ngIf="!isEditingTitle">
      <span class="channel-description__hash">#</span>
      <span class="channel-description__value">{{ title }}</span>
    </div>

    <div class="channel-description__content channel-description__content--edit" *ngIf="isEditingTitle">
      <span class="channel-description__hash">#</span>
      <input
        type="text"
        [(ngModel)]="editableTitle"
        aria-label="Channel-Name"
        class="channel-description__input"
        [readonly]="!isEditingTitle"
        (keydown.enter)="saveTitle(); $event.preventDefault()"
        #titleInput />
    </div>
  </div>

  <div class="channel-description__card" [class.channel-description__card--editing]="isEditingDescription">
    <div class="channel-description__card-header">
      <span class="channel-description__label">Beschreibung</span>
      <button
        type="button"
        class="channel-description__action"
        *ngIf="!isEditingDescription"
        (click)="startEditDescription()">
        Bearbeiten
      </button>
      <button
        type="button"
        class="channel-description__action channel-description__action--primary"
        *ngIf="isEditingDescription"
        [disabled]="isSavingDescription || !channelId"
        (click)="saveDescription()">
        Speichern
      </button>
    </div>

    <p class="channel-description__text" *ngIf="!isEditingDescription">{{ description }}</p>
    <textarea
      id="channel-description-input"
      class="channel-description__textarea"
      rows="3"
      [readonly]="!isEditingDescription"
      aria-label="Channel-Beschreibung"
      [(ngModel)]="editableDescription"
      *ngIf="isEditingDescription"></textarea>
  </div>
  <p class="channel-description__error" *ngIf="errorMessage">{{ errorMessage }}</p>
  <div class="channel-description__divider"></div>

  <div class="channel-description__creator">
    <span class="channel-description__creator-label">Erstellt von</span>
    <span class="channel-description__creator-name">{{ createdBy }}</span>
  </div>

  <div class="channel-description__actions" *ngIf="canLeave ">
    <button type="button" class="channel-description__secondary" (click)="leaveChannel()" [disabled]="isLeaving || !channelId">Channel verlassen</button>
  </div>
</section>

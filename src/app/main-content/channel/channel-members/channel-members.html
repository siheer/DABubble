<section
  *ngIf="visible"
  class="channel-members"
  [class.mobile]="mode === 'mobile'"
  [@fadeScale]="visible ? 'enter' : 'leave'"
  (@fadeScale.done)="onAnimationDone()"
  role="dialog"
  aria-modal="true"
  [attr.aria-label]="overlayTitle">
  <header class="channel-members__header">
    <div class="channel-members__title-row">
      <h3>{{ overlayTitle }}</h3>
    </div>
    <button type="button" class="channel-members__close" aria-label="Overlay schließen" (click)="closeOverlay()">
      <mat-icon>close</mat-icon>
    </button>
  </header>

  <ul class="channel-members__list">
    <li
      *ngFor="let member of members"
      class="channel-members__item"
      [class.channel-members__item--clickable]="!member.isCurrentUser">
      <button
        type="button"
        class="channel-members__item-button"
        [disabled]="member.isCurrentUser"
        (click)="openMemberProfile(member)">
        <img [src]="getAvatarUrl(member.profilePictureKey)" [alt]="member.name" class="channel-members__avatar" />
        <div class="channel-members__meta">
          <div class="channel-members__name-row">
            <span class="channel-members__name truncate">{{ member.name }}</span>
            <span *ngIf="member.isCurrentUser" class="channel-members__pill flex-shrink-0">Du</span>
          </div>
          <span *ngIf="member.subtitle" class="channel-members__subtitle">{{ member.subtitle }}</span>
        </div>
      </button>
    </li>
  </ul>
  <p *ngIf="members.length > 3" class="channel-members__more-info">{{ members.length }} Mitglieder</p>
  <button type="button" class="channel-members__add" (click)="openAddToChannel($event)">
    <img class="channel-members__add-icon" src="imgs/channel-members/Add members button.svg" alt="" />
    <img
      class="channel-members__add-icon channel-members__add-icon--hover"
      src="imgs/channel-members/Add members button hover.svg"
      alt="" />Mitglieder hinzufügen
  </button>
</section>
